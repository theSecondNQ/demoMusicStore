<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title>结算 - 音乐商店</title>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        .order-summary { border: 1px solid #ddd; padding: 20px; border-radius: 5px; margin-bottom: 20px; }
        .order-item { padding: 10px 0; border-bottom: 1px solid #eee; }
        .total { font-size: 20px; font-weight: bold; margin: 20px 0; }
        .form-group { margin-bottom: 15px; }
        label { display: block; margin-bottom: 5px; font-weight: bold; }
        input[type="text"], textarea, select {
            width: 100%; padding: 8px; border: 1px solid #ddd; border-radius: 4px;
        }
        textarea { height: 80px; }
        .btn { padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; text-decoration: none; display: inline-block; }
        .btn-success { background: #28a745; color: white; font-size: 16px; }
        .btn-primary { background: #007bff; color: white; }
    </style>
</head>
<body>
<div class="header">
    <a th:href="@{/cart/list}">← 返回购物车</a>
    <h1 style="text-align: center;">订单结算</h1>
</div>

<div class="order-summary">
    <h3>订单明细</h3>
    <div th:each="item : ${cartList}" class="order-item">
        <div th:text="${item.title}"></div>
        <div style="color: #666;">
            数量：<span th:text="${item.quantity}"></span> ×
            单价：￥<span th:text="${#numbers.formatDecimal(item.price, 1, 2)}"></span> =
            小计：￥<span th:text="${#numbers.formatDecimal(item.price * item.quantity, 1, 2)}"></span>
        </div>
    </div>

    <div class="total">
        订单总额：￥<span th:text="${#numbers.formatDecimal(total, 1, 2)}"></span>
    </div>
</div>

<form th:action="@{/order/create}" method="post">
    <div class="form-group">
        <label for="paymentMethod">支付方式：</label>
        <select id="paymentMethod" name="paymentMethod" required>
            <option value="">请选择支付方式</option>
            <option value="支付宝">支付宝</option>
            <option value="微信支付">微信支付</option>
        </select>
    </div>

    <div style="text-align: center;">
        <button type="submit" class="btn btn-success">提交订单</button>
        <a th:href="@{/cart/list}" class="btn btn-primary">返回修改</a>
    </div>
</form>

<div style="margin-top: 30px; padding: 15px; background: #f8f9fa; border-radius: 5px;">
    <h4>订单说明：</h4>
    <p>提交订单后，您可以在"我的订单"中查看订单状态。</p>
    <p>订单状态包括：待处理 → 已支付 → 已完成。</p>
</div>
<div th:replace="fragments/footer :: footer"></div>
</body>
</html>